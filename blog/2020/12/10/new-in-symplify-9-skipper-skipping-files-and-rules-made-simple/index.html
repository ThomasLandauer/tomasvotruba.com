<!DOCTYPE html>
<html lang="en">
    <head>
    <title>New in Symplify 9: Skipper - Skipping Files and Rules made Simple | Tomas Votruba</title>
    <meta charset="utf-8">
    <meta name="robots" content="index, follow">

        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">

    
    <link rel="alternate" type="application/rss+xml" title="Tomas Votruba Blog RSS" href="/rss.xml">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,700" rel="stylesheet">

        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/solid.css" integrity="sha384-wnAC7ln+XN0UKdcPvJvtqIH3jOjs9pnKnq9qX68ImXvOGz2JuFoEiCjT8jyZQX2z" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/brands.css" integrity="sha384-nT8r1Kzllf71iZl81CdFzObMsaLOhqBU1JD2+XoAALbdtWaXDOlWOZTR4v1ktjPE" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/fontawesome.css" integrity="sha384-HbmWTHay9psM8qyzEKPc8odH4DsOuzdejtnr+OFtDmOcIVnhgReQ4GZBH7uwcjf6" crossorigin="anonymous">

        <link href="/assets/bootstrap/bootstrap.min.css" rel="stylesheet" type="text/css" />

    <link href="/assets/prism/prism.css" rel="stylesheet" type="text/css" />

        <link href="/assets/css/style.css" rel="stylesheet" type="text/css" />


        <link href="/assets/css/checklist.css" rel="stylesheet" type="text/css" />
</head>
    <body>
                <!-- post_id: 292 -->

        
<div class="hidden-sm-down">
    <nav class="navbar">
        <div class="container-fluid">
            <ul>
                <li id="logo">
                    <img src="https://avatars1.githubusercontent.com/u/924196?s=60&v=4" class="me_avatar">
                    Tomas Votruba
                </li>
                <li class="active">
                    <a href="/">Blog</a>
                </li>

                <li class="">
                    <a href="/clusters">Clusters</a>
                </li>

                <li>
                    <a href="https://github.com/sponsors/TomasVotruba">Sponsor Me</a>
                </li>

                <li class="">
                    <a href="/mission">Mission</a>
                </li>
                <li class="">
                    <a href="/contact">Contact</a>
                </li>
                <li id="top-menu-search">
                    <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="https://schema.org/SearchAction">
    <meta itemprop="target" content="https://www.google.com/search?q={q}"/>
    <input name="sitesearch" value="tomasvotruba.com" type="hidden"/>
    <input itemprop="query-input" type="text" id="search-query" class="form-control" required="required" name="q" placeholder="Search..." autocomplete="off"/>
</form>
                </li>
            </ul>
        </div>
    </nav>
</div>

<div class="hidden-md-up">
    <nav class="navbar" id="mobile-menu">
        <div class="container">
            <a href="/" class="col-3 col-sm-3 active">
                <em class="fas fa-book"></em>
                <br>
                Blog
            </a>


            <a href="/clusters" class="col-3 col-sm-3 ">
                <em class="fas fa-share-alt"></em>
                <br>
                Clusters
            </a>

            <a href="/contact" class="col-3 col-sm-3 ">
                <em class="fas fa-phone"></em>
                <br>
                Contact
            </a>
        </div>
    </nav>

    <div class="hidden-md-up text-center" id="top-menu-search-mobile">
        <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="https://schema.org/SearchAction">
    <meta itemprop="target" content="https://www.google.com/search?q={q}"/>
    <input name="sitesearch" value="tomasvotruba.com" type="hidden"/>
    <input itemprop="query-input" type="text" id="search-query" class="form-control" required="required" name="q" placeholder="Search..." autocomplete="off"/>
</form>
    </div>
</div>

        <div class="container-fluid" id="post">
            <h1>New in Symplify 9: Skipper - Skipping Files and Rules made Simple</h1>

            <ul class="list-inline post-metadata">
    <li class="list-inline-item mr-3">
        <em class="fas fa-calendar fa-fw"></em>
        <time datetime="2020-12-Thu">
            
                            Dec 10, 2020
            
            </strike>        </time>
    </li>

    
            <li class="list-inline-item mr-3">
            <em class="fas fa-fw fa-comments"></em>
            <a href="/blog/2020/12/10/new-in-symplify-9-skipper-skipping-files-and-rules-made-simple/#disqus_thread">X</a> comments
        </li>
    
    
            <li class="list-inline-item mr-3 text-primary">
            <em class="fab fa-fw fa-github"></em>
            <a href="https://github.com/tomasvotruba/tomasvotruba.com/edit/main/packages/blog/data/2020/2020-12-10-new-in-symplify-9-skipper-skipping-files-and-rules-made-simple.md">Found a typo? Edit me</a>
        </li>
    </ul>

            
            
            <div class="card card-bigger mb-5">
                <div class="card-body pb-2">
                    <p>Symplify 9 brings another component <strong>to ease the life for package developers</strong>. In Rector and ECS, you can ignore specific absolute paths or dynamic paths by <code>fnmatch()</code>. You can also ignore specific Rector, Fixer, and Sniff classes.
<br><br>
Both packages use almost the same syntax, yet there are minor differences based and syntax tweaks.
<br><br>
New Skipper component prevents this and allows <strong>you to use standardized syntax in a single <code>skip</code> parameters</strong>.</p>
                </div>
            </div>

            <p>When I started writing this post, I remembered a TV series from my childhood about the hero kangaroo:</p>
<img src="/assets/images/posts/2020/skipper-kangaroo.jpg" class="img-thumbnail">
<p>It's like Batman, just kangaroo. Anyone? :) Ok, I'm old. Back to the software skipper.</p>
<p><br></p>
<h2 id="quot-how-can-i-skip-the-quot">&quot;How Can I Skip the ...?&quot;</h2>
<p>This is one of the most common questions in Rector or ECS issues. Skip feature is native to most of CLI tools:</p>
<ul>
<li><a href="https://phpstan.org/user-guide/ignoring-errors">PHPStan has <code>ignoreErrors</code> and <code>excludes_analyse</code> parameter</a></li>
<li><a href="https://github.com/squizlabs/PHP_CodeSniffer/wiki/Advanced-Usage#ignoring-files-and-folders">PHP_CodeSniffer has command line and annotation support</a></li>
<li><a href="https://github.com/FriendsOfPHP/PHP-CS-Fixer/issues/3317">PHP CS Fixer</a> is thinking about it since 2017</li>
</ul>
<p>Most packages have at least 2 ways to skip a file or rule:</p>
<ul>
<li>exclude_files</li>
<li>excludedFiles</li>
<li>skip</li>
<li>ignored</li>
<li>ignorePaths</li>
<li>ignoreDirectories</li>
<li>notAllowedPaths</li>
<li>...</li>
</ul>
<p>It makes sense to have each information separated for the package developer. Then they know if you want to skip a path or a rule. But it's <strong>absolute hell for the user of the package</strong>.</p>
<ul>
<li>It's a common case, we need to ignore one file in all our CLI tools.</li>
<li>For each package, we have to learn new syntax.</li>
<li>Typos, hard to remember, you skip a class in paths parameters...</li>
</ul>
<p>We've all been there.</p>
<h2 id="complexity-opens-space-for-bugs">Complexity opens Space for Bugs</h2>
<p>These complicated configuration options also allows to have duplicated skip. Try debugging this:</p>
<pre><code class="language-php">use Symfony\Component\DependencyInjection\Loader\Configurator\ContainerConfigurator;
use Symplify\Skipper\ValueObject\Option;

return static function (ContainerConfigurator $containerConfigurator): void {
    $parameters = $containerConfigurator-&gt;parameters();

    $parameters-&gt;set(Option::SKIP, [
        SomeSniff::class =&gt; [
            __DIR__ . '/some-path',
        ]
    ]);

    $parameters-&gt;set(Option::EXCLUDE_RULES, [SomeSniff::class]);
};</code></pre>
<p>Why is the <code>SomeSniff</code> skipped in <code>__DIR__ . '/another-path'</code> too? It shouldn't be, only <code>__DIR__ . '/some-path'</code>.</p>
<h2 id="kiss-the-code-skip-code-parameter">KISS: The <code>SKIP</code> Parameter</h2>
<p>Why not take users priority and make it simple for them? Let's use <a href="/blog/2020/03/09/art-of-letting-go/">Occam's razor</a> and provide intuitive choice:</p>
<p>Single <code>skip</code> parameter:</p>
<pre><code class="language-php">use Symfony\Component\DependencyInjection\Loader\Configurator\ContainerConfigurator;
use Symplify\Skipper\ValueObject\Option;

return static function (ContainerConfigurator $containerConfigurator): void {
    $parameters = $containerConfigurator-&gt;parameters();

    $parameters-&gt;set(Option::SKIP, [
        // absolute directory
        __DIR__ . '/some-path',

        // absolute file
        __DIR__ . '/some-path/some-file.php',

        // with mask
        '*/Fixture/*',

        // specific class
        SomeClass::class,

        // specific class specific path
        NarrowedClass::class =&gt; [__DIR__ . '/src/OnlyHere'],

        // class code in paths
        AnotherSniff::class . '.SomeCode' =&gt; ['*Sniff.php', '*YamlFileLoader.php'],
    ]);
};</code></pre>
<p>That's it!</p>
<p><br></p>
<p>That's the main principle of <a href="https://github.com/symplify/skipper">Skipper</a>.
Rector 0.9 and ECS 9 build on Skipper, so be sure to use its syntax in <code>ecs.php</code> and <code>rector.php</code>. Instead of many <code>skip</code>/<code>exclude_paths</code>/<code>exclude_rules</code> params, there is just <code>skip</code> now.</p>
<h2 id="how-to-upgrade-from-symplify-8-to-9-and-rector-0-8-to-0-9">How to Upgrade from Symplify 8 to 9 and Rector 0.8 to 0.9</h2>
<p>Just to be sure, this is how you upgrade your <code>ecs.php</code> and <code>rector.php</code> configs:</p>
<pre><code class="language-diff">-$parameters-&gt;set(Option::EXCLUDE_PATHS, [
+$parameters-&gt;set(Option::SKIP, [
     // paths to skip
     '*/Fixture/*',
     __DIR__ . '/packages/easy-hydrator/tests/Fixture',
-]);
-$parameters-&gt;set(Option::SKIP, [
-     ArrayDeclarationSniff::class =&gt; null,
+     ArrayDeclarationSniff::class,
 ]);</code></pre>
<p>After renaming of <code>EXCLUDE_PATHS</code> to <code>SKIP</code>, make sure there is just one <code>SKIP</code> option in your config. Symfony would pick just one of them without telling you.</p>
<p><br></p>
<p>Happy coding!</p>

            <br>

            <div class="row mb-5 mt-5">
                <div class="col-12 mb-5">
                                                                <a href="/blog/2020/12/07/new-in-symplify-9-markdown-diff" class="d-block pt-4 pb-4 pl-4 pr-4 btn btn-success btn-wrappable">
                            <em class="fas fa-fw fa-forward"></em>
                            <strong>Read Next</strong>
                            <br>
                            <span class="text-bigger">
                                New in Symplify 9: Markdown Diff
                            </span>
                        </a>
                                    </div>
            </div>

            <br>

            <a name="comments"></a>
            <div id="disqus_thread"></div>

<script>
    /**
     *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
     *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
    /*
    var disqus_config = function () {
    this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    */
    (function() { // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');
        s.src = 'https://itsworthsharing.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
        </div>

        <script id="dsq-count-scr" src="https://itsworthsharing.disqus.com/count.js" async defer></script>

        <script src="/assets/js/jquery-3.3.1.slim.min.js"></script>
<script src="/assets/js/cleaning-lady-checklist.js"></script>

<script src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.10.19/js/dataTables.bootstrap4.min.js"></script>

<script>
    ga=function(){ ga.q.push(arguments) };
    ga.q=[];
    ga.l=+new Date;
    ga('create', 'UA-46082345-1', 'auto');
    ga('send','pageview');
</script>
<script src="https://www.google-analytics.com/analytics.js" async defer></script>

<script src="/assets/prism/prism.js"></script>

<script>
    // sortable table
    $('.sortable_table').DataTable({
        // see https://datatables.net/examples/basic_init/filter_only.html
        "searching": false,
        "paging": false,
        "info": false,
        "order": [[1, "desc"]],
        // see https://datatables.net/examples/advanced_init/sort_direction_control.html
        "aoColumns": [
            null,
            { "orderSequence": [ "desc", "asc" ] },
            { "orderSequence": [ "desc", "asc" ] },
            { "orderSequence": [ "desc", "asc" ] }
        ]
    });
</script>

<div class="text-center mt-5" id="footer">
    <p class="mt-2">
        Open-source is my life. Does my work help yours? <a href="https://github.com/sponsors/TomasVotruba">Sponsor Me</a> &nbsp;
        <em class="fas fa-heart text-danger fa-lg"></em>

        &nbsp;
        <span class="pl-2 pr-2">•</span>
        &nbsp;

        See <a href="/archive">Post Archive</a>

        &nbsp;
        <span class="pl-2 pr-2">•</span>
        &nbsp;

        <a href="/rss.xml">Get RSS</a>
    </p>
</div>
    </body>
</html>

        <meta property="og:type" content="article" />
    <meta property="og:title" content="New in Symplify 9: Skipper - Skipping Files and Rules made Simple" />
    <meta property="og:description" content="Symplify 9 brings another component **to ease the life for package developers**. In Rector and ECS, you can ignore specific absolute paths or dynamic paths by `fnmatch()`. You can also ignore specific Rector, Fixer, and Sniff classes.

Both packages use almost the same syntax, yet there are minor differences based and syntax tweaks.

New Skipper component prevents this and allows **you to use standardized syntax in a single `skip` parameters**.
" />
    <meta property="og:url" content="/blog/2020/12/10/new-in-symplify-9-skipper-skipping-files-and-rules-made-simple" />

        <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@votrubaT">
    <meta name="twitter:title" content="New in Symplify 9: Skipper - Skipping Files and Rules made Simple" />
    <meta name="twitter:description" content="Symplify 9 brings another component **to ease the life for package developers**. In Rector and ECS, you can ignore specific absolute paths or dynamic paths by `fnmatch()`. You can also ignore specific Rector, Fixer, and Sniff classes.

Both packages use almost the same syntax, yet there are minor differences based and syntax tweaks.

New Skipper component prevents this and allows **you to use standardized syntax in a single `skip` parameters**.
" />
